{% extends "base.html" %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Assign - {{ title }}{% endblock title %}
{% block content %}
<style>
    form {border: 3px solid #f1f1f1;}

    {% comment %} input {
        padding:8px;
        display:block;
        border:none;
        border-bottom:1px solid #ccc;
        width:100%
    } {% endcomment %}

    .imagecontainer {
        text-align: center;
        margin : 12px 0 6px 0;
    }

    img.avatar {
        width: 25%;
        border-radius: 50%;
      }

    button {
        padding:14px 20px;
        margin: 8px 0;
        border-radius: 12px;
        width: 100%;
    }
</style>
<br>
<div class="w3-container">
    <h3>{{ header }}</h3>
</div>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="w3-container">

        {{ form.media }}
        {{ form|crispy }}
        <br>
        {% if images %}
            <p class="w3-text w3-disabled">ภาพปัจจุบัน</p>
            {% for image in images %}
            <img src="{{ image.images.url }}" class="w3-image" width="200" height="100">
            {% endfor %}
            <br>
        {% endif %}
        
        <button type="submit" class="w3-button w3-green w3-large">{{ btn_text }}</button>
    </div>  

    <div class="w3-bar">
        {% if form.instance.id %}
            <button class="w3-bar-item w3-button w3-right">
                <a href="{% url 'assign:delete' pk=form.instance.pk %}">Delete</a>
            </button>
            <button type="reset" class="w3-bar-item w3-button w3-right">Reset</button>
            <button class="w3-bar-item w3-button w3-right">
                <a href="{% url 'assign:list' %}" style="text-decoration: none;">Cancle</a>
            </button>
        {% else %}
        
        <button type="reset" class="w3-bar-item w3-button w3-right">Reset</button>
        <button class="w3-bar-item w3-button w3-right">
            <a href="{% url 'assign:list' %}" style="text-decoration: none;">Cancle</a>
        </button>

        {% endif %}
    </div>
</form>

<br><br><br>

{% endblock content %}

{% block script %}
<script>
    var name = "{{ user.id }}"
    document.getElementById("author").value = name;

</script>
<script src="https://cdn.jsdelivr.net/npm/jquery-selectme@0.2.0/lib/jquery.selectMe.js"></script>
<link href="https://cdn.jsdelivr.net/npm/jquery-selectme@0.2.0/lib/jquery.selectMe.css" rel="style">
<script>
    $('select').selectMe({
    cssFile: 'https://cdn.jsdelivr.net/npm/jquery-selectme@0.2.0/lib/jquery.selectMe.css',
    width: '100%',
    columnCount: 1,
    search: true,
    locale: 'en',
    localeResource: { 
        'en': {
            none: 'None selected',
            from: 'from',
            search: 'Search',
            selectAll: 'Select all',
            unselectAll: 'Unselect all',
            showSelected: 'Show selected',
        } 
    },
    // Callbacks
    onLoad: function( element ) {},
    onDropdownOpen: function( element ) {},
    onDropdownClose: function( element ) {},
    onSearch: function( element ) {},
    onOptionValueChanged: function( element ) {},
});
</script>

{% endblock script %}
